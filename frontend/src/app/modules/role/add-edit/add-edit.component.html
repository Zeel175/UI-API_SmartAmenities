<!-- role-add-edit.component.html -->
<div class="bg-card flex min-w-0 flex-auto flex-col dark:bg-transparent sm:absolute sm:inset-0 sm:overflow-auto">
  <!-- Header -->
  <div class="relative flex flex-0 flex-col border-b px-6 py-8 sm:flex-row sm:items-center sm:justify-between md:px-8">
    <!-- Title -->
    <div class="text-4xl font-extrabold tracking-tight">
      <i class="icon-edit"></i> Add/Edit Roles
    </div>
    <!-- Action Button -->
    <div class="mt-6 flex shrink-0 items-center sm:ml-4 sm:mt-0">
      <a
        *ngIf="IsViewPermission"
        mat-flat-button
        color="primary"
        class="app-button back-Green"
        (click)="cancel()"
      >
        View List
      </a>
    </div>
  </div>

  <!-- Main content -->
  <div class="flex flex-auto overflow-visible">
    <div class="flex flex-auto flex-col overflow-visible sm:mb-18 sm:overflow-y-auto">
      <mat-card class="role-add-edit-form mt-4 mx-6 md:mx-8">
        <mat-card-content>
          <form [formGroup]="frmRole" (ngSubmit)="save()" novalidate class="app-form">

            <!-- Role Details Section -->
            <div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3 auto-rows-min mb-6">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Role Name</mat-label>
                <input matInput formControlName="name" />
                <mat-error *ngIf="frmRole.get('name').invalid && frmRole.get('name').touched">
                  Role Name is required
                </mat-error>
              </mat-form-field>
            </div>

            <!-- Permissions Section -->
            <div class="mb-6">
              <h5 class="text-lg font-semibold mb-2">Permissions</h5>
              <div class="table-responsive">
                <table class="table table-hover table-bordered permissions-table w-full">
                  <thead class="bg-primary text-white text-center">
                    <tr>
                      <th>Permission</th>
                      <th>View</th>
                      <th>Add</th>
                      <th>Edit</th>
                      <th>Delete</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr
                      *ngFor="let permission of frmRole.get('Permissions')['controls']; let i = index"
                      class="text-center"
                    >
                      <td class="text-left">{{ permission.get('permission').value }}</td>
                      <td><mat-checkbox [formControl]="permission.get('view')"></mat-checkbox></td>
                      <td><mat-checkbox [formControl]="permission.get('add')"></mat-checkbox></td>
                      <td><mat-checkbox [formControl]="permission.get('edit')"></mat-checkbox></td>
                      <td><mat-checkbox [formControl]="permission.get('delete')"></mat-checkbox></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <!-- Save Button -->
            <div class="flex justify-center">
              <button mat-flat-button color="primary" class="app-button back-Green" type="submit">
                Save
              </button>
            </div>

          </form>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
